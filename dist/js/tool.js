(function(e,f){typeof exports=="object"&&typeof module<"u"?f(require("vue"),require("LaravelNova")):typeof define=="function"&&define.amd?define(["vue","LaravelNova"],f):(e=typeof globalThis<"u"?globalThis:e||self,f(e.Vue,e.LaravelNova))})(this,function(e,f){"use strict";const D={key:0,class:"absolute inset-0 bg-gray-500/75 dark:bg-gray-900/75 rounded-lg"},b={__name:"Button",props:{theme:String,loading:Boolean},setup(l){return(o,n)=>{const i=e.resolveComponent("Loader");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["shadow relative h-10 px-4 rounded-lg bg-primary-500 text-white text-white flex items-center text-center cursor-pointer hover:opacity-75 transition",{"bg-red-500":l.theme==="danger","bg-yellow-500":l.theme==="warning","bg-blue-500":l.theme==="info","bg-green-500":l.theme==="success","bg-gray-200 !text-gray-900 dark:bg-gray-700 dark:!text-gray-300":l.theme==="gray","pointer-events-none":l.loading}])},[e.renderSlot(o.$slots,"default"),l.loading?(e.openBlock(),e.createElementBlock("div",D)):e.createCommentVNode("",!0),l.loading?(e.openBlock(),e.createBlock(i,{key:1,class:"absolute inset-0 m-auto text-white",width:"32"})):e.createCommentVNode("",!0)],2)}}},L=(l,o)=>{const n=l.__vccOpts||l;for(const[i,g]of o)n[i]=g;return n},T={props:{type:{type:String,required:!1},loading:{type:Boolean,default:!1},processing:{type:Boolean,default:!1}}},M={type:"button",class:"inline-flex relative items-center justify-center w-8 h-8 focus:outline-none focus:ring rounded-lg"},j={key:0,class:"absolute",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};function O(l,o,n,i,g,m){const x=e.resolveComponent("Icon"),N=e.resolveComponent("Loader");return e.openBlock(),e.createElementBlock("button",M,[e.createElementVNode("span",{class:e.normalizeClass({invisible:n.processing||n.loading})},[e.renderSlot(l.$slots,"default"),n.type?(e.openBlock(),e.createBlock(x,{key:0,solid:"",type:n.type},null,8,["type"])):e.createCommentVNode("",!0)],2),n.processing||n.loading?(e.openBlock(),e.createElementBlock("span",j,[e.createVNode(N,{class:"text-gray-500",width:"32"})])):e.createCommentVNode("",!0)])}const _=L(T,[["render",O]]),$={class:"nova-command-runner"},F={class:"text-lg font-semibold mb-6"},R={key:0,class:"flex flex-col md:flex-row mb-3 md:space-x-3 space-y-2 md:space-y-0"},U=["value"],q={class:"bg-white dark:bg-gray-800 rounded-lg shadow mb-3 grid md:grid-cols-12 gap-6 p-6"},z={class:"text-sm font-semibold"},H={class:"flex flex-col md:flex-row md:items-center justify-between mt-6 mb-6"},I={class:"font-bold"},A={class:"md:ml-2 inline-flex items-center shadow rounded-lg bg-white dark:bg-gray-800 px-2 h-8"},P={class:"bg-white dark:bg-gray-800 rounded-lg shadow mb-3 p-2 overflow-y-hidden overflow-x-auto"},X={key:0,class:"w-full"},J={class:"text-center px-2 whitespace-nowrap uppercase text-gray-500 text-xxs tracking-wide py-2"},K={class:"text-center px-2 whitespace-nowrap uppercase text-gray-500 text-xxs tracking-wide py-2"},W={class:"text-center px-2 whitespace-nowrap uppercase text-gray-500 text-xxs tracking-wide py-2"},G={class:"text-center px-2 whitespace-nowrap uppercase text-gray-500 text-xxs tracking-wide py-2"},Q={class:"text-center px-2 whitespace-nowrap uppercase text-gray-500 text-xxs tracking-wide py-2"},Y={class:"text-center px-2 whitespace-nowrap uppercase text-gray-500 text-xxs tracking-wide py-2"},Z={class:"text-center px-2 whitespace-nowrap uppercase text-gray-500 text-xxs tracking-wide py-2"},v={class:"px-2 py-2 border-t border-gray-100 dark:border-gray-700 whitespace-nowrap cursor-pointer dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"},ee={class:"px-2 py-2 border-t border-gray-100 dark:border-gray-700 whitespace-nowrap cursor-pointer dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"},te={class:"px-2 py-2 border-t border-gray-100 dark:border-gray-700 whitespace-nowrap cursor-pointer dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"},re={class:"px-2 py-2 border-t border-gray-100 dark:border-gray-700 whitespace-nowrap cursor-pointer dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"},oe=["innerHTML"],ae={class:"px-2 py-2 border-t border-gray-100 dark:border-gray-700 whitespace-nowrap cursor-pointer dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"},ne={class:"px-2 py-2 border-t border-gray-100 dark:border-gray-700 whitespace-nowrap cursor-pointer dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900"},le={key:1,class:"flex flex-col justify-center items-center px-6 py-8"},se={class:"text-base font-normal mt-3"},ce={key:1,class:"fixed inset-0 z-[60] bg-gray-500/75 dark:bg-gray-900/75 flex items-center justify-center p-3"},ie={class:"relative p-6 bg-white dark:bg-gray-800 rounded-lg shadow min-w-80 md:w-1/2 max-w-full max-h-full overflow-y-auto"},de={class:"text-lg font-bold mb-5"},pe={class:"grid gap-6"},ge={key:0},me={class:"mb-2 block leading-tight w-full text-sm font-semibold"},ye=["onUpdate:modelValue"],he=["type","onUpdate:modelValue","placeholder"],fe={key:1},ke=["onUpdate:modelValue"],be={class:"flex items-center space-x-3 mt-5"},xe={__name:"Tool",setup(l){const{__:o}=f.useLocalization(),n=e.ref(!1),i=e.ref(!1),g=e.ref(!1),m=e.ref(!1),x=e.ref(""),N=e.ref(),y=e.ref(),h=e.ref(),u=e.ref(),C=e.ref(),ue=e.ref(),S=e.ref(),w=e.ref(),k=e.ref(),a=e.ref();e.onMounted(async()=>{await E(),we()});async function E(){if(n.value)return;n.value=!0;const d=await fetch("/nova-vendor/stepanenko3/nova-command-runner");if(d.ok){const r=await d.clone().json();x.value=r.heading,y.value=r.history,C.value=r.commands,ue.value=r.help,S.value=r.polling_time,u.value=[],r.commands.forEach(p=>{let t=p.group;u.value.indexOf(t)<0&&u.value.push(t)}),h.value=r.custom_commands,h.value&&Object.keys(h.value).indexOf(k.value)===-1&&(k.value=Object.keys(h.value)[0])}n.value=!1}function we(){N.value=setInterval(()=>{!n.value&&(i.value||y.value.filter(d=>d.status==="pending").length>0)&&E()},S.value)}function _e(){V({label:o("Clear Command Run History"),type:"primary",help:o("Are you sure you want to clear the command run history?"),command_type:"artisan",command:"cache:forget nova-command-runner-history",variables:[],flags:[]})}function V(d){a.value=d,m.value=!0}function B(){m.value=!1,a.value={}}function Ne(){let d=!0;a.value.variables&&Object.keys(a.value.variables).forEach(r=>{(a.value.variables[r].value==null||a.value.variables[r].value.length===0)&&(d=!1,Nova.error(a.value.variables[r].label+" is required"))}),d&&(g.value=!0,fetch("/nova-vendor/stepanenko3/nova-command-runner/run",{method:"POST",headers:{"X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content,"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},body:JSON.stringify({command:a.value})}).then(async r=>{if(r.ok){const p=await r.json();p.status&&(p.status==="success"||p.status==="pending")?Nova.success(p.result):Nova.error(p.result),g.value=!1,y.value=p.history,B()}else Nova.error(`${r.status}: ${r.statusText||"Something went wrong"}`),g.value=!1,B()}).catch(r=>{g.value=!1}))}function Ee(){if(!w.value){Nova.error("Please enter a command");return}V({label:o("Custom Command"),type:"primary",help:o("Are you sure you want to run this command?"),command_type:k.value,command:w.value,variables:[],flags:[]})}return(d,r)=>{const p=e.resolveComponent("Icon");return e.openBlock(),e.createElementBlock("div",$,[e.createElementVNode("div",F,e.toDisplayString(x.value),1),Array.isArray(h.value)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",R,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":r[0]||(r[0]=t=>k.value=t),class:"appearance-none bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-800 h-10 px-3 rounded-lg"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,(t,s)=>(e.openBlock(),e.createElementBlock("option",{key:s,value:s},e.toDisplayString(t),9,U))),128))],512),[[e.vModelSelect,k.value]]),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=t=>w.value=t),class:"appearance-none bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-800 h-10 px-3 rounded-lg flex-grow"},null,512),[[e.vModelText,w.value]]),e.createVNode(b,{onClick:Ee},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(o)("Run")),1)]),_:1})])),e.createElementVNode("div",q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,(t,s)=>(e.openBlock(),e.createElementBlock("div",{class:"md:col-span-3 grid gap-3 content-start",key:s},[e.createElementVNode("div",z,e.toDisplayString(t||e.unref(o)("Unnamed group")),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,(c,Ve)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[c.group==t?(e.openBlock(),e.createBlock(b,{key:0,loading:!m.value&&g.value,theme:c.type,onClick:Be=>V(c)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.label),1)]),_:2},1032,["loading","theme","onClick"])):e.createCommentVNode("",!0)],64))),256))]))),128))]),e.createElementVNode("div",H,[e.createElementVNode("div",I,e.toDisplayString(e.unref(o)("History")),1),e.createElementVNode("div",A,[e.createVNode(_,{onClick:e.withModifiers(E,["prevent"]),loading:n.value,type:"refresh",title:e.unref(o)("Refresh")},null,8,["loading","title"]),e.createVNode(_,{onClick:r[2]||(r[2]=e.withModifiers(t=>i.value=!i.value,["prevent"])),class:e.normalizeClass([{"text-green-500":i.value,"text-gray-500":!i.value},"w-8 h-8"]),type:"clock",title:e.unref(o)("Polling")},null,8,["class","title"]),e.createVNode(_,{onClick:e.withModifiers(_e,["prevent"]),type:"trash",class:"text-red-500",title:e.unref(o)("Clear history")},null,8,["title"])])]),e.createElementVNode("div",P,[y.value&&Object.keys(y.value).length>0?(e.openBlock(),e.createElementBlock("table",X,[e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",J,e.toDisplayString(e.unref(o)("Command")),1),e.createElementVNode("th",K,e.toDisplayString(e.unref(o)("Type")),1),e.createElementVNode("th",W,e.toDisplayString(e.unref(o)("Run By")),1),e.createElementVNode("th",G,e.toDisplayString(e.unref(o)("Status")),1),e.createElementVNode("th",Q,e.toDisplayString(e.unref(o)("Result")),1),e.createElementVNode("th",Y,e.toDisplayString(e.unref(o)("Duration")),1),e.createElementVNode("th",Z,e.toDisplayString(e.unref(o)("Happened")),1)])]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,(t,s)=>(e.openBlock(),e.createElementBlock("tr",{key:s},[e.createElementVNode("td",v,e.toDisplayString(t.run),1),e.createElementVNode("td",ee,e.toDisplayString(t.type),1),e.createElementVNode("td",te,e.toDisplayString(t.run_by),1),e.createElementVNode("td",{class:e.normalizeClass(["px-2 py-2 border-t border-gray-100 dark:border-gray-700 whitespace-nowrap cursor-pointer dark:bg-gray-800 group-hover:bg-gray-50 dark:group-hover:bg-gray-900",{"!text-green-500":t.status==="success","!text-yellow-500":t.status==="pending","!text-red-500":t.status==="error"}])},e.toDisplayString(t.status),3),e.createElementVNode("td",re,[e.createElementVNode("pre",{innerHTML:t.result},null,8,oe)]),e.createElementVNode("td",ae,e.toDisplayString(t.duration?t.duration+" sec.":""),1),e.createElementVNode("td",ne,e.toDisplayString(t.time),1)]))),128))])])):(e.openBlock(),e.createElementBlock("div",le,[e.createVNode(p,{type:"search",class:"mb-3 text-gray-300 dark:text-gray-500",width:"50",height:"50"}),e.createElementVNode("h3",se,e.toDisplayString(e.unref(o)("No Logs.")),1)]))]),m.value?(e.openBlock(),e.createElementBlock("div",ce,[e.createElementVNode("div",{class:"absolute inset-0",onClick:r[3]||(r[3]=e.withModifiers(()=>m.value=!1,["prevent"]))}),e.createElementVNode("div",ie,[e.createElementVNode("div",{class:"absolute top-0 right-0 w-5 cursor-pointer hover:opacity-75 text-lg",onClick:r[4]||(r[4]=e.withModifiers(()=>m.value=!1,["prevent"]))}," ✕ "),e.createElementVNode("div",de,e.toDisplayString(a.value.label),1),e.createElementVNode("div",pe,[a.value.help?(e.openBlock(),e.createElementBlock("p",ge,e.toDisplayString(a.value.help),1)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value.variables,(t,s)=>(e.openBlock(),e.createElementBlock("div",{key:s},[e.createElementVNode("label",me,e.toDisplayString(t.label),1),t.field==="select"?e.withDirectives((e.openBlock(),e.createElementBlock("select",{key:0,class:"appearance-none bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-900 h-10 px-3 rounded-lg","onUpdate:modelValue":c=>t.value=c},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.options,c=>(e.openBlock(),e.createElementBlock("option",null,e.toDisplayString(c),1))),256))],8,ye)),[[e.vModelSelect,t.value]]):e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:1,type:t.field,class:"w-full appearance-none bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-900 h-10 px-3 rounded-lg","onUpdate:modelValue":c=>t.value=c,placeholder:t.placeholder},null,8,he)),[[e.vModelDynamic,t.value]])]))),128)),a.value.flags.length?(e.openBlock(),e.createElementBlock("div",fe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value.flags,(t,s)=>(e.openBlock(),e.createElementBlock("label",{key:"flag-"+s,class:"flex items-center cursor-pointer"},[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":c=>a.value.flags[s].selected=c,"true-value":1,"false-value":0,class:"opacity-0 absolute pointer-events-none"},null,8,ke),[[e.vModelCheckbox,a.value.flags[s].selected]]),e.createElementVNode("span",{class:e.normalizeClass(["h-6 w-6 block mr-2 flex-shrink-0 rounded-lg bg-white dark:bg-gray-900 text-transparent border border-gray-300 dark:border-gray-900 flex items-center justify-center text-center",{"!text-gray-900":a.value.flags[s].selected}])}," ✓ ",2),e.createElementVNode("span",null,e.toDisplayString(t.label),1)]))),128))])):e.createCommentVNode("",!0)]),e.createElementVNode("div",be,[e.createVNode(b,{theme:"gray",onClick:e.withModifiers(B,["prevent"])},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(o)("Cancel")),1)]),_:1}),e.createVNode(b,{loading:g.value,onClick:r[5]||(r[5]=t=>Ne()),theme:a.value.type},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value.label),1)]),_:1},8,["loading","theme"])])])])):e.createCommentVNode("",!0)])}}};Nova.booting(()=>{Nova.inertia("NovaCommandRunner",xe)})});
